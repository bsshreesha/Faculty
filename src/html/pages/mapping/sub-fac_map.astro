---
import Head from "@components/_head.astro";
import Footer from "@components/dashboard/_footer.astro";
import Topbar from "@components/dashboard/_topbar.astro";
import Sidenav from "@components/dashboard/_sidenav.astro";
import Scripts from "@components/_scripts.astro";

const title = "Subject Faculty Mapping";
const path = "../../../dist";
const mainPage = "mapping";
const page = "sub-fac_map";
---

<!DOCTYPE html>
<html lang="en">
  <!--begin::Head-->
  <head>
    <Head title={title} path={path} />
    <style>
  .error-border {
    border: 2px solid red !important;
  }

  .error-message {
    font-size: 14px;
    color: red;
    margin-top: 5px;
    display: none;
  }
</style>
  </head>
  <!--end::Head-->
  <!--begin::Body-->
  <body class="layout-fixed sidebar-expand-lg sidebar-mini bg-body-tertiary">
    <!--begin::App Wrapper-->
    <div class="app-wrapper">
      <Topbar path={path} />
      <Sidenav path={path} mainPage={mainPage} page={page} />
      <!--begin::App Main-->
      <main class="app-main">
        <!--begin::App Content Header-->
        <div class="app-content-header">
          <!--begin::Container-->
          <div class="container-fluid">
            <!--begin::Row-->
            <div class="row">
  <div class="col-sm-6">
    <h3 class="mb-0">Subject Faculty Mapping</h3>
  </div>
  <div class="col-sm-6">
    <ol class="breadcrumb float-sm-end">
      <li class="breadcrumb-item"><a href="/index.html">Home</a></li>
      <li class="breadcrumb-item active" aria-current="page">
        Subject - Faculty Mapping
      </li>
    </ol>
  </div>
</div>
</div>
</div>

<div class="app-content">
  <div class="container-fluid">
    <div class="row">

      <!-- Card 1: Subject Details -->
      <div class="col-12 mb-4">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Subject Details</h3>
            <div class="card-tools">
              <button type="button" class="btn btn-tool" data-lte-toggle="card-collapse" title="Collapse">
                <i data-lte-icon="expand" class="bi bi-plus-lg"></i>
                <i data-lte-icon="collapse" class="bi bi-dash-lg"></i>
              </button>
              <button type="button" class="btn btn-tool" data-lte-toggle="card-remove" title="Remove">
                <i class="bi bi-x-lg"></i>
              </button>
            </div>
          </div>
          <div class="card-body">
            <form id="subjectForm">
              <div class="row g-3 mb-3">
                <div class="col-md-4">
                  <label for="subjectCode" class="form-label">Subject Code</label>
                  <input type="text" class="form-control" id="subjectCode" placeholder="Enter Subject Code">
                  <div class="error-message" id="error-subjectCode">Please enter Subject Code</div>
                </div>
                <div class="col-md-4">
                  <label for="subjectName" class="form-label">Subject Name</label>
                  <input type="text" class="form-control" id="subjectName" placeholder="Enter Subject Name">
                  <div class="error-message" id="error-subjectName">Please enter Subject Name</div>
                </div>
                <div class="col-md-4">
                  <label for="semester" class="form-label">Semester</label>
                  <input type="text" class="form-control" id="semester" placeholder="Enter Semester">
                  <div class="error-message" id="error-semester">Please enter Semester</div>
                </div>
              </div>
              <div class="row mt-4">
                <div class="col-md-3 text-center">
                  <button type="reset" class="btn btn-warning w-100">RESET</button>
                </div>
                <div class="col-md-6"></div>
                <div class="col-md-3 text-center">
                  <button type="submit" class="btn btn-success w-100">SUBMIT</button>
                </div>
              </div>
            </form>

            <div class="table-responsive mt-4">
              <table class="table table-bordered table-striped">
                <thead>
                  <tr>
                    <th>Subject Code</th>
                    <th>Subject Name</th>
                    <th>Semester</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>CSE101</td>
                    <td>Data Structures</td>
                    <td>3</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Card 2: Faculty Mapping -->
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Faculty Mapping</h3>
            <div class="card-tools">
              <button type="button" class="btn btn-tool" data-lte-toggle="card-collapse" title="Collapse">
                <i data-lte-icon="expand" class="bi bi-plus-lg"></i>
                <i data-lte-icon="collapse" class="bi bi-dash-lg"></i>
              </button>
              <button type="button" class="btn btn-tool" data-lte-toggle="card-remove" title="Remove">
                <i class="bi bi-x-lg"></i>
              </button>
            </div>
          </div>
          <div class="card-body">
            <form id="facultyMappingForm">
              <div class="row g-3">
                <div class="col-md-4">
                  <label for="subjectSelect" class="form-label">Subject</label>
                  <select class="form-select" id="subjectSelect">
                    <option value="" selected disabled>Choose Subject</option>
                    <option value="CSE101">Data Structures</option>
                    <option value="CSE102">Algorithms</option>
                  </select>
                  <div class="error-message" id="error-subjectSelect">Please select a subject</div>
                </div>
                <div class="col-md-4">
                  <label for="facultySelect" class="form-label">Faculty Name and ID</label>
                  <select class="form-select" id="facultySelect">
                    <option value="" selected disabled>Choose Faculty</option>
                    <option value="F001">Dr. Smith (F001)</option>
                    <option value="F002">Prof. Jane (F002)</option>
                  </select>
                  <div class="error-message" id="error-facultySelect">Please select a faculty</div>
                </div>
                <div class="col-md-4">
                  <label for="departmentSelect" class="form-label">Department</label>
                  <select class="form-select" id="departmentSelect">
                    <option value="" selected disabled>Choose Department</option>
                    <option value="CSE">CSE</option>
                    <option value="ECE">ECE</option>
                  </select>
                  <div class="error-message" id="error-departmentSelect">Please select a department</div>
                </div>

              </div>
              <div class="row mt-4">
                <div class="col-md-3 text-center">
                  <button type="reset" class="btn btn-warning w-100">RESET</button>
                </div>
                <div class="col-md-6"></div>
                <div class="col-md-3 text-center">
                  <button type="submit" class="btn btn-success w-100">SUBMIT</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>

    </div>
            <!--end::Row-->
          </div>
          <!--end::Container-->
        </div>
        <!--end::App Content-->
      </main>
      <!--end::App Main-->
      <Footer />
    </div>
    <!--end::App Wrapper-->
    <!--begin::Script-->
    <Scripts path={path} />
    <script>
  document.addEventListener("DOMContentLoaded", function () {
    const subjectFields = ["subjectCode", "subjectName", "semester"];
    const mappingFields = ["subjectSelect", "facultySelect", "departmentSelect"];

    function validateField(id) {
      const field = document.getElementById(id);
      const error = document.getElementById(`error-${id}`);
      if (field.value.trim() === "" || field.value === null) {
        field.classList.add("error-border");
        error.style.display = "block";
        return false;
      } else {
        field.classList.remove("error-border");
        error.style.display = "none";
        return true;
      }
    }

    function attachEvents(fields) {
      fields.forEach((id) => {
        const field = document.getElementById(id);

        // When field loses focus (blur)
        field.addEventListener("blur", () => validateField(id));

        // When user types/selects (input/change)
        field.addEventListener("input", () => {
          document.getElementById(`error-${id}`).style.display = "none";
          field.classList.remove("error-border");
        });

        // For selects
        field.addEventListener("change", () => {
          document.getElementById(`error-${id}`).style.display = "none";
          field.classList.remove("error-border");
        });
      });
    }

    // Attach live interaction handlers
    attachEvents(subjectFields);
    attachEvents(mappingFields);

    // Form submit handlers
    document.getElementById("subjectForm").addEventListener("submit", function (e) {
      e.preventDefault();
      let valid = true;
      subjectFields.forEach(id => { if (!validateField(id)) valid = false; });
      if (valid) alert("Subject form submitted successfully!");
    });

    document.getElementById("facultyMappingForm").addEventListener("submit", function (e) {
      e.preventDefault();
      let valid = true;
      mappingFields.forEach(id => { if (!validateField(id)) valid = false; });
      if (valid) alert("Faculty mapping form submitted successfully!");
    });
  });
</script>

    <!--end::Script-->
  </body><!--end::Body-->
</html>
